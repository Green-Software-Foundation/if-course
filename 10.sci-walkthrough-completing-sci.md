# SCI Walkthrough - Methodology & Implementation - SCI Score

Let's revisit our dependency tree to see what we did and what's remaining.

âœ… sci
- âœ… operational-carbon
  - âœ… operational-energy
    - âœ… cpu-energy
      - ğŸ cpu-utilization(80)
      - ğŸ cloud-vendor(Microsoft Azure)
      - ğŸ cloud-instance-type(Standard_A2m_v2)
    - âœ… memory-energy
      - ğŸ memory-utilization(8)
  - âœ… carbon-intensity
    - ğŸ cloud-region(westeurope)
- âœ… embodied-carbon
    - ğŸ cloud-vendor(Microsoft Azure)
    - ğŸ cloud-instance-type(Standard_A2m_v2)
- âœ… functional-unit
  - ğŸ site-visits(210)

In the previous modules we computed `operational-carbon` and `embodied-carbon`. In this module we'll bring it all together and compute the final SCI score.

## `carbon`

### Methodology

As a reminder, the SCI equation is:

```mathematica
SCI = (O + M) / R
```

Where `O` is operational carbon, `M` is embodied carbon, and `R` is the functional unit.

Before we can divide by the functional unit, we first need to sum operational and embodied carbon into a single total carbon value. This is simply:

```mathematica
carbon = operational-carbon + embodied-carbon
```

### Implementation

We'll use the `Sum` plugin to add `operational-carbon` and `embodied-carbon` together, outputting the result as `carbon`:

```yaml
to-total-carbon:
  path: "builtin"
  method: Sum
  config:
    input-parameters:
      - operational-carbon
      - embodied-carbon
    output-parameter: carbon
```

## `sci`

### Methodology

The final step is to divide total `carbon` by our functional unit. We chose `site-visits` as our functional unit back in module 6 â€” it represents the number of visits to our website during the observation period.

The calculation is straightforward:

```mathematica
sci = carbon / site-visits
```

This gives us the SCI score in **gCO2e per visit**.

### Implementation

Impact Framework provides a builtin `Sci` plugin that handles exactly this. You configure it with the name of the functional unit parameter, and it divides `carbon` by that parameter's value for each observation:

```yaml
sci:                                # <1>
  path: "builtin"
  method: Sci                       # <2>
  config:
    functional-unit: site-visits    # <3>
```

- <1>: We name this plugin instance `sci`.
- <2>: The `Sci` method from the builtin standard library.
- <3>: The `functional-unit` config tells the plugin which parameter to divide `carbon` by. In our case, it's `site-visits`. The plugin expects a parameter called `carbon` to already exist in the observations â€” which is why we sum operational and embodied carbon in the previous step.

> [!IMPORTANT]
> The `Sci` plugin specifically looks for a parameter called `carbon` in the observations. If your total carbon has a different name, the plugin won't find it. This is why we use the `Sum` plugin to create a parameter named exactly `carbon` from `operational-carbon` and `embodied-carbon`.

## Full Manifest

The complete SCI walkthrough manifest, building on everything from the previous modules and adding the two new plugins (`to-total-carbon` and `sci`):

```yaml
name: sci-walkthrough
description: This manifest file computes the carbon per visit for our website
tags:
initialize:
  plugins:
    memory-utilization-to-memory-energy:
      method: Coefficient
      path: "builtin"
      config:
        input-parameter: memory-utilization
        coefficient: 0.00039
        output-parameter: memory-energy
    cloud-instance-metadata:
      method: CSVLookup
      path: 'builtin'
      config:
        filepath: https://raw.githubusercontent.com/Green-Software-Foundation/if-course/refs/heads/main/src/cloud-metdata-azure-instances.csv
        query:
          instance-class: "cloud-instance"
        output:
          - ['cpu-tdp', 'cpu-tdp']
          - ['cpu-cores-utilized', 'vCPUs']
          - ['memory-available', 'memory']
    cpu-utilization-to-tdp-multiplier:
      method: Interpolation
      path: "builtin"
      config:
        method: linear
        x: [0, 10, 50, 100]
        y: [0.12, 0.32, 0.75, 1.02]
        input-parameter: "cpu-utilization"
        output-parameter: "tdp-multiplier"
    tdp-multiplier-to-cpu-power:
      method: Multiply
      path: builtin
      config:
        input-parameters:
          - tdp-multiplier
          - cpu-tdp
        output-parameter: "cpu-power"
    cpu-power-to-cpu-energy:
      method: Divide
      path: "builtin"
      config:
        numerator: cpu-power
        denominator: 1000
        output: cpu-energy
    to-operational-energy:
      path: "builtin"
      method: Sum
      config:
        input-parameters:
          - memory-energy
          - cpu-energy
        output-parameter: operational-energy
    carbon-intensity-from-region:
      method: CSVLookup
      path: builtin
      config:
        filepath: https://raw.githubusercontent.com/Green-Software-Foundation/real-time-cloud/refs/heads/main/Cloud_Region_Metadata.csv
        query:
          cloud-provider: "cloud-provider"
          cloud-region: "cloud-region"
        output:
          - ['grid-carbon-intensity-average-consumption-annual', 'carbon-intensity']
    to-operational-carbon:
      method: Multiply
      path: builtin
      config:
        input-parameters:
          - operational-energy
          - carbon-intensity
        output-parameter: operational-carbon
    embodied-carbon:
      path: builtin
      method: SciEmbodied
    # highlight-start
    to-total-carbon:
      path: "builtin"
      method: Sum
      config:
        input-parameters:
          - operational-carbon
          - embodied-carbon
        output-parameter: carbon
    sci:
      path: "builtin"
      method: Sci
      config:
        functional-unit: site-visits
    # highlight-end
tree:
  children:
    server-1:
      defaults:
        cloud-region: westeurope
        cloud-instance: Standard_A2m_v2
        cloud-provider: "Microsoft Azure"
        ssd: 1
        hdd: 0
        gpu: 0
      pipeline:
        compute:
          - memory-utilization-to-memory-energy
          - cloud-instance-metadata
          - cpu-utilization-to-tdp-multiplier
          - tdp-multiplier-to-cpu-power
          - cpu-power-to-cpu-energy
          - to-operational-energy
          - carbon-intensity-from-region
          - to-operational-carbon
          - embodied-carbon
          # highlight-start
          - to-total-carbon
          - sci
          # highlight-end
      inputs:
        - timestamp: 2023-08-01T00:00
          duration: 3600
          memory-utilization: 8.8
          cpu-utilization: 80
          site-visits: 210
```

And now if we run in the terminal with

```bash
if-run -m sci-walkthrough.yml
```

An output manifest is printed to the terminal with these `outputs` appended.

```yaml
outputs:
  - timestamp: 2023-08-01T00:00
    duration: 3600
    memory-utilization: 8.8
    cpu-utilization: 80
    site-visits: 210
    cloud-region: westeurope
    cloud-instance: Standard_A2m_v2
    cloud-provider: Microsoft Azure
    ssd: 1
    hdd: 0
    gpu: 0
    memory-energy: 0.003432
    cpu-tdp: 205
    vCPUs: 2
    memory: 16
    tdp-multiplier: 0.912
    cpu-power: 186.96
    cpu-energy: 0.18696000000000002
    operational-energy: 0.190392
    carbon-intensity: 283.17
    operational-carbon: 53.913302640000005
    embodied-carbon: 32.81963470319634
    # highlight-start
    carbon: 86.73293734319634
    sci: 0.413013987348554
    # highlight-end
```

We now have a complete SCI score: **0.41 gCO2e per visit**.

This single number tells us that for every visit to our website during this hour, approximately 0.41 grams of CO2 equivalent were emitted â€” accounting for both the operational energy of running the server and the embodied carbon of the hardware it runs on.

> [!NOTE]
> You may notice a `usage-ratio` parameter in the full output (omitted above for clarity). This is added automatically by the `SciEmbodied` plugin and represents the fraction of the server's total capacity being used, which is used internally to apportion the embodied carbon.
