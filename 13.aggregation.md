# Aggregation

In the previous module we extended our SCI walkthrough to three timesteps and got an SCI score for each one. But what if you want a **single summary number** — the total carbon across all three days, or the average SCI score for the whole period? That's what aggregation does.

**Aggregation** is the process of summarising a set of metrics within Impact Framework. It's a built-in feature — you don't need to add any plugins. You simply configure it in your manifest file.

## Types of Aggregation

IF supports two types of aggregation:

### Time Series (Horizontal) Aggregation

This takes a **time series of values for a single component and condenses them into one number**. For our walkthrough, this means combining the three daily `carbon` values into a total and the three `sci` values into a summary.

For example, the three `carbon` values from our outputs were `86.73`, `78.50`, and `90.60`. Time series aggregation sums these to give the total carbon across the whole period: `255.83 gCO2e`.

### Tree (Vertical) Aggregation

This aggregates **across the component hierarchy**. When you have multiple child components under a parent node, tree aggregation combines their time series into a summary at the parent level.

Our walkthrough currently only has one component (`server-1`), so tree aggregation simply copies the values up to the root. But if we had multiple servers, each with their own time series, tree aggregation would sum their carbon emissions together to give a fleet-wide total.

## Configuring Aggregation

To enable aggregation, add an `aggregation` section to the top level of your manifest:

```yaml
name: sci-walkthrough
description: This manifest file computes the carbon per visit for our website
tags:
# highlight-start
aggregation:
  metrics:                  # <1>
    - carbon
    - sci
  type: both                # <2>
# highlight-end
initialize:
  plugins:
    # ... plugins as before
```

- <1>: The `metrics` array lists which output parameters to aggregate. Here we aggregate both `carbon` (total emissions) and `sci` (emissions per visit).
- <2>: The `type` can be `time` (horizontal only), `component` (vertical only), or `both`.

That's it — no plugins to initialise, no pipeline changes. Impact Framework handles the rest.

## Running It

Adding the `aggregation` config above to our multi-timestep manifest from the previous module and running it:

```bash
if-run -m sci-walkthrough.yml
```

Two new sections appear in the output. First, an `aggregated` field is added to each component, summarising its time series:

```yaml
tree:
  children:
    server-1:
      # ... outputs as before ...
      # highlight-start
      aggregated:
        carbon: 255.82808307958905
        sci: 0.36420834267084956
      # highlight-end
```

Second, because we set `type: both`, a tree-level `outputs` and `aggregated` section appears at the root, combining all components:

```yaml
tree:
  children:
    server-1:
      # ...
  # highlight-start
  outputs:
    - carbon: 86.73293734319634
      sci: 0.413013987348554
      timestamp: 2023-08-01T00:00
      duration: 3600
    - carbon: 78.49863691319635
      sci: 0.41315072059577024
      timestamp: 2023-08-02T00:00
      duration: 3600
    - carbon: 90.59650882319636
      sci: 0.26646032006822457
      timestamp: 2023-08-03T00:00
      duration: 3600
  aggregated:
    carbon: 255.82808307958905
    sci: 0.36420834267084956
  # highlight-end
```

Since we only have one component, the root-level values match the component-level values. With multiple components, the root would show the combined totals.

The aggregated values tell us that across all three days, our server emitted a total of **255.83 gCO2e**, with an average SCI of **0.36 gCO2e per visit**.

For full configuration details, see the [Aggregation documentation](https://if.greensoftware.foundation/major-concepts/aggregation).
